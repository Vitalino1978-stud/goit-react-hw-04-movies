(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[0],{38:function(t,e,n){},39:function(t,e,n){},65:function(t,e,n){},66:function(t,e,n){},67:function(t,e,n){},68:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),c=n(32),s=n.n(c),i=n(6),o=n(2),u=(n(38),"/movies"),h="/search",j="/movies/:movieId",l=(n(39),n(0)),p=function(){return Object(l.jsxs)("nav",{children:[Object(l.jsx)(i.b,{to:u,className:"nav_link",activeClassName:"nav_link_active",children:"Home"}),Object(l.jsx)(i.b,{to:h,className:"nav_link",activeClassName:"nav_link_active",children:"Movies"})]})},v=function(){return Object(l.jsx)("header",{className:"AppBar",children:Object(l.jsx)(p,{})})},d=n(3),b=n.n(d),f=n(9),m=n(11),O=n(12),x=n(14),y=n(13),w=n(16),g=n.n(w),k="4b778d4c29fb731b86ff7a9149d1de58",S="https://api.themoviedb.org/3",_=function(){var t=Object(f.a)(b.a.mark((function t(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.get("".concat(S,"/trending/all/day?api_key=").concat(k));case 2:return e=t.sent,t.abrupt("return",e.data.results);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(){var t=Object(f.a)(b.a.mark((function t(e){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.get("".concat(S,"/movie/").concat(e,"?api_key=").concat(k));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=function(){var t=Object(f.a)(b.a.mark((function t(e){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.get("".concat(S,"/movie/").concat(e,"/credits?api_key=").concat(k));case 2:return n=t.sent,t.abrupt("return",n.data.cast);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=function(){var t=Object(f.a)(b.a.mark((function t(e){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.get("".concat(S,"/movie/").concat(e,"/reviews?api_key=").concat(k));case 2:return n=t.sent,t.abrupt("return",n.data.results);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Q={fetchMovies:_,fetchById:C,fetchCast:M,searchMovies:function(){var t=Object(f.a)(b.a.mark((function t(e){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.get("".concat(S,"/search/movie?api_key=").concat(k,"&query=").concat(e));case 2:return n=t.sent,t.abrupt("return",n.data.results);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),fetchReviews:N},A=function(t){var e=t.title,n=t.name;t.poster_path;return Object(l.jsxs)("div",{children:[Object(l.jsx)("img",{src:"",alt:""}),Object(l.jsx)("h4",{children:e||n})]})},q=(n(65),Object(o.f)((function(t){var e=t.movies,n=t.location;return Object(l.jsx)("ul",{className:"movie_list",children:e.map((function(t){var e=t.id,r=t.title,a=t.name,c=t.poster_path;return Object(l.jsx)("li",{className:"movie_list_item",children:Object(l.jsx)(i.b,{to:{pathname:"/movies/".concat(e),state:{from:n}},children:Object(l.jsx)(A,{title:r,name:a,poster_path:c})})},e)}))})}))),B=function(t){Object(x.a)(n,t);var e=Object(y.a)(n);function n(){var t;Object(m.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).state={movies:[]},t}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var t=Object(f.a)(b.a.mark((function t(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q.fetchMovies();case 2:e=t.sent,this.setState({movies:e});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Trending today"}),Object(l.jsx)(q,{movies:this.state.movies})]})}}]),n}(r.Component),D=n(22),I=function(t){var e=t.cast;return Object(l.jsx)("ul",{children:e.map((function(t){var e=t.character,n=t.id,r=t.name,a=t.profile_path;return Object(l.jsxs)("li",{children:[Object(l.jsx)("img",{src:"".concat("https://image.tmdb.org/t/p/w200").concat(a),alt:r}),Object(l.jsxs)("p",{children:["Actor: ",r]}),Object(l.jsxs)("p",{children:["Character: ",e]})]},n)}))})},G=function(t){var e=t.review;return Object(l.jsx)("ul",{children:e.map((function(t){var e=t.author,n=t.id,r=t.content;return Object(l.jsxs)("li",{children:[Object(l.jsxs)("p",{children:["Author: ",e]}),Object(l.jsx)("p",{children:r})]},n)}))})},R=function(t){Object(x.a)(n,t);var e=Object(y.a)(n);function n(){var t;Object(m.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).state={pathState:{}},t}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var t;this.setState({pathState:null===(t=this.props.location)||void 0===t?void 0:t.state})}},{key:"render",value:function(){var t=this.props,e=t.match,n=t.cast,r=t.review;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h3",{children:"Additional information"}),Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:Object(l.jsx)(i.b,{to:{pathname:"".concat(e.url,"/cast"),state:{from:this.state.pathState.from}},children:"Cast"})}),Object(l.jsxs)("li",{children:[Object(l.jsx)(i.b,{to:{pathname:"".concat(e.url,"/review"),state:{from:this.state.pathState.from}},children:"Reviews"})," "]})]}),Object(l.jsxs)("div",{children:[n&&Object(l.jsx)(o.a,{path:"".concat(e.url,"/cast"),render:function(){return Object(l.jsx)(I,{cast:n})}}),r&&Object(l.jsx)(o.a,{path:"".concat(e.url,"/review"),render:function(){return Object(l.jsx)(G,{review:r})}})]})]})}}]),n}(r.Component),U=(n(66),function(t){Object(x.a)(n,t);var e=Object(y.a)(n);function n(){var t;Object(m.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).state={movie:{},genreNames:"",cast:[],review:[]},t.handleGoBack=function(){var e,n=t.props,r=n.history,a=n.location;r.push((null===a||void 0===a||null===(e=a.state)||void 0===e?void 0:e.from)||u)},t}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var t=Object(f.a)(b.a.mark((function t(){var e,n,r,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.match.params.movieId,t.next=3,Q.fetchById(e);case 3:return n=t.sent,this.setState({movie:n}),this.setState({genreNames:this.state.movie.genres.map((function(t){return t.name})).join(" ")}),t.next=8,Q.fetchCast(e);case 8:return r=t.sent,this.setState({cast:r}),t.next=12,Q.fetchReviews(e);case 12:a=t.sent,this.setState({review:a});case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state.movie,n=e.title,r=e.poster_path,a=e.backdrop_path,c=e.id,s=e.vote_average,i=(e.genres,e.overview);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("button",{type:"button",onClick:this.handleGoBack,children:"Go back"}),Object(l.jsx)("h1",{children:"this is details view"}),Object(l.jsx)("img",{className:"movie_poster",src:"".concat("https://image.tmdb.org/t/p/w500","/").concat(r||a),alt:n}),Object(l.jsx)("h2",{children:n}),Object(l.jsxs)("p",{children:["User score: ",10*s,"%"]}),Object(l.jsx)("h3",{children:"Overview"}),Object(l.jsx)("p",{children:i}),Object(l.jsx)("h3",{children:"Genres"}),c&&Object(l.jsx)("p",{children:this.state.genreNames})]}),Object(l.jsx)("div",{children:c&&Object(l.jsx)(o.a,{path:this.props.match.path,render:function(e){return Object(l.jsx)(R,Object(D.a)(Object(D.a)({},e),{},{cast:t.state.cast,review:t.state.review}))}})})]})}}]),n}(r.Component)),F=function(t){Object(x.a)(n,t);var e=Object(y.a)(n);function n(){var t;Object(m.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).state={query:""},t.handleChange=function(e){t.setState({query:e.target.value.trim()})},t.handleSubmit=function(e){e.preventDefault(),t.props.onSubmit(t.state.query)},t}return Object(O.a)(n,[{key:"render",value:function(){return Object(l.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(l.jsx)("input",{type:"text",value:this.state.query,onChange:this.handleChange}),Object(l.jsx)("button",{type:"submit",children:"Search"})]})}}]),n}(r.Component),J=function(t){Object(x.a)(n,t);var e=Object(y.a)(n);function n(){var t;Object(m.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).state={searchQuery:"",movies:[]},t.onChangeQuery=function(e){t.setState({searchQuery:e}),t.props.history.push({pathname:t.props.location.pathname,search:"query=".concat(e),state:{searchQuery:e}})},t.fetchMovies=Object(f.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.searchMovies(t.state.searchQuery);case 2:n=e.sent,t.setState({movies:n});case 4:case"end":return e.stop()}}),e)}))),t}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var t,e,n,r;(null===(t=this.props.location)||void 0===t||null===(e=t.state)||void 0===e?void 0:e.searchQuery)&&this.setState({searchQuery:null===(n=this.props.location)||void 0===n||null===(r=n.state)||void 0===r?void 0:r.searchQuery});if(window.location.search){var a=new URLSearchParams(window.location.search);this.setState({searchQuery:a.get("query")})}}},{key:"componentDidUpdate",value:function(t,e){e.searchQuery!==this.state.searchQuery&&this.fetchMovies()}},{key:"render",value:function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Search movies"}),Object(l.jsx)(F,{onSubmit:this.onChangeQuery}),Object(l.jsx)(q,{movies:this.state.movies})]})}}]),n}(r.Component),E=function(){return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(v,{}),Object(l.jsxs)(o.c,{children:[Object(l.jsx)(o.a,{exact:!0,path:u,component:B}),Object(l.jsx)(o.a,{path:h,component:J}),Object(l.jsx)(o.a,{path:j,component:U})]})]})};n(67);s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(i.a,{children:Object(l.jsx)(E,{})})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.3980ebef.chunk.js.map